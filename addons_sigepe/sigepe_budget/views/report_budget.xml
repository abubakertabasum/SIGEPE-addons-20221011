<?xml version="1.0" encoding="utf-8"?>

<odoo>


<!--<record id="budget_landscape_id" model="report.paperformat">
    <field name="name">Budget Landscape</field>
    <field name="default" eval="True"/>
    <field name="format">A4</field>
    <field name="page_height">0</field>
    <field name="page_width">0</field>
    <field name="orientation">Landscape</field>
    <field name="margin_top">40</field>
    <field name="margin_bottom">40</field>
    <field name="margin_left">7</field>
    <field name="margin_right">7</field>
    <field name="header_line" eval="False"/>
    <field name="header_spacing">35</field>
    <field name="dpi">90</field>
</record>-->


    <report id = "report_budget"
    string = "Budget"
    model = "budg_budget"
    report_type = "qweb-html"
    file = "sigepe_budget.report_budget"
    name = "sigepe_budget.report_budget_view"
    menu = "True"/>
	

    <template id="report_budget_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h3><span t-field="o.typebudget_id.lb_long"/> Numéro <span t-field="o.refp"/></h3>
                        <h3>Exercice <span t-field="o.x_exercice_id.no_ex"/></h3> 
                        <head>
                        
                   <style type="text/css">
                        
                        th,
                        td {
                            border : 1px solid black;
							font-family : times new roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h3 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
							font-family : times new roman;
                        }
						.taille {
								font-size : small;
						}

                        h1 {
                            text-align : center;
							font-family : times new roman;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                        	<tr>
                                <th style ="border : 2px solid #000000;" rowspan="2">Tit</th>
                                <th style ="border : 2px solid #000000;" rowspan="2">Sec</th>
                                <th style ="border : 2px solid #000000;" rowspan="2">Chap</th>
                                <th style ="border : 2px solid #000000;" rowspan="2">Art</th>
                                <th style ="border : 2px solid #000000;" rowspan="2">Parag</th>
                                <th style ="border : 2px solid #000000;" rowspan="2">Rub</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exe n-3</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exe n-2</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exe n-1</th>
                                <th style ="border : 2px solid #000000; text-align:center;">Dotations</th>
                        	</tr>
                        	<tr>
                                <th style = "border:2px solid; text-align:center;">Prévision</th>
                                <th style = "border:2px solid; text-align:center;">Exécution</th>
                                <th style = "border:2px solid; text-align:center;">Prévision</th>
                                <th style = "border:2px solid; text-align:center;">Exécution</th>
                                <th style = "border:2px solid; text-align:center;">Prévision</th>
                                <th style = "border:2px solid; text-align:center;">Exécution</th>
                            </tr>
                        
                        </thead>
                        
                         <tbody>                      
                         
                            <tr t-foreach="o.rubrique_ids" t-as="ligne">
                          
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_titre_id.titre.cd_titre"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_section_id.section.cd_section"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_chapitre_id.chapitre.cd_chapitre"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_article_id.article.cd_article"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_paragraphe_id.paragraphe.cd_paragraphe"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.cd_rubrique_id.rubrique"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                                   
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_ant1)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                                  
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_ant1exe)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                                
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_ant2)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                        
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_ant2exe)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                                  
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_precedent)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                                   
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_precedentexe)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:2px solid; text-align:right;">
                               
                                    <span t-esc="'{:,}'.format(int(ligne.mnts_budgetise)).replace(',', ' ')"/>
                                </td>
                             </tr>
                        </tbody>  
                </table>
				
				 <div>
	                        <div style="float:right;">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>                        
	                        <div style="float:left">
                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
							

                        </div>
				
            </div>
		</div>
            
        </t>
    </t>
</t>
</template>



<report id = "report_engagement"
    string = "Engagement niveau rubrique"
    model = "budg_engagement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_engagement"
    name = "sigepe_budget.report_engagement_view"
    menu = "False"/>


<template id="report_engagement_view">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">BON D'ENGAGEMENT DE DEPENSE</h2>
                     <strong>Référence bon d'engagement :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_eng"/> du <span t-field="o.dt_etat"/>
               	<br/>
               	
               <table class="table table-sm mb32">
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="6">Imputation</th>
               	<tr>
	               	<th style = "border:2px solid;">Tit</th>
	               	<th style = "border:2px solid;">Sec</th>
	               	<th style = "border:2px solid;">Chap</th>
	               	<th style = "border:2px solid;">Art</th>
	               	<th style = "border:2px solid;">Par</th>
	               	<th style = "border:2px solid;">Rub</th>
               	</tr>
               	
                   <td><span t-field="o.cd_titre_id"/> </td>
            
                   <td><span t-field="o.cd_section_id"/></td>
                   
                   <td><span t-field="o.cd_chapitre_id"/></td>
                   
                   <td><span t-field="o.cd_article_id"/></td>
                   
                   <td><span t-field="o.cd_paragraphe_id"/></td>
                   
                   <td><span t-field="o.cd_rubrique_id"/></td>
               </table>
               <br/>
               	   
                    <div class="absolute">VISA CONTROLE</div>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 100px;
                                    bottom : 100px;
                                    right : 100px;
                                    weight : 150px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>

                <table class="table table-sm mb32">


                        <tr >
                            <th style ="border:none;"></th>
                            <th style = "border:2px solid;">Montants</th>
                            <th style = "border:2px solid;">Observations</th>
                        </tr>                      
                        <tr>
                            <td style = "border:2px solid;">Crédits ouverts</td>
                            <td style = "border:2px solid;"><p t-field="o.credit_eng" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                            <td style = "border:2px solid; text-align:center;" rowspan="5">Total des engagements : <p t-field="o.mnt_tot_eng"/></td>
                        </tr>
                        <tr>
                            <td style = "border:2px solid;">Cumul des engagements antérieurs</td>
                            <td style = "border:2px solid;"><p t-field="o.cumul" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td style = "border:2px solid;">Crédits disponibles</td>
                            <td style = "border:2px solid;"><p t-field="o.credit_dispo" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td style = "border:2px solid;">Présent engagement</td>
                            <td style = "border:2px solid;"> <p t-field="o.mnt_eng" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td style = "border:2px solid;">Nouveau disponible</td>
                            <td style = "border:2px solid;"><p t-field="o.mnt_lbudg_ap" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr> 
                    
                </table><br/>
				
                <table class="table table-sm mb32">
                    
                        <tr>
                            <th style = "border:2px solid;">Objet</th>
                            <th style = "border:2px solid;">Montant</th>
                            
                        </tr>                      
                   
                        <tr>
                        <td style = "border:2px solid;"><p t-field="o.lb_obj"/></td>
                        <td style = "border:2px solid;" rowspan="3"><p t-field="o.mnt_eng" style = "text-align:center;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>  
                        </tr>

                        <tr>
                            <th style = "border:2px solid;">Bénéficiaire/Fournisseur</th>
                        </tr>
                        <tr>
                            <td style = "border:2px solid;"><p t-field="o.no_beneficiaire"/> </td>
                        </tr>
                </table>     
                         <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:2px solid;">Pièces justificatives</th>
                            <th style = "border:2px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_engagement'].search([('eng_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:2px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:2px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table>                   
                
                
                <strong>Arrêté le présent engagement à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_eng"/>) F CFA 
                        <br/><br/><br/>
                       
                        <div>
	                        <div style="float:right">
	                        	
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                        </div>                        
	                        <div style="float:left">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>
						</div>
                        
                </div>
            </t>
        </t>
    </t>
</template>


<report id = "report_engagement_new"
    string = "Engagement"
    model = "budg_engagement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_engagement_new"
    name = "sigepe_budget.report_engagement_view_new"
	print_report_name="'ENG - %s' % (object.no_eng)"
    menu = "True"/>


<template id="report_engagement_view_new">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">BON D'ENGAGEMENT DE DEPENSE</h2>
                     <strong>Référence bon d'engagement :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_eng"/> du <span t-field="o.dt_etat"/>
               	<br/>
               	
               
               <div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="5">Imputation</th>
               
               <tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sect</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>

               </table>
               </div>
				<!--<div>
				<h6><span t-field="o.cd_paragraphe_id.paragraphe.lb_long"/></h6>
				</div>-->
	            
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 1px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr style="height:150px; width:250px;"><td style="height:150px;"></td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        
                        td {
                            border : 1px solid black;
                            text-align : center;
                            font-family : Times New Roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #dddddd;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	
                        }
                        
						
						.marge {
								margin-left: 5em;
								text-align : left;
								font-family : Times New  Roman !important;
								border : 0px solid black;
								text-indent : 10px;
								
								}
                    </style>
               </head>
				<br/>
                <table style ="width:100%;">


                        <thead>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px; text-align:center;">Crédits ouverts</th>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px;text-align:center;">Cumul des engagements antérieurs</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Crédits disponibles</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Présent engagement</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Total des engagements</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Nouveau disponible</th>
                        </thead> 
                          
                        <tbody>                  
                            <!-- <td style = "border:1px solid; width:100px;">Crédits ouverts</td>-->
                            <td><span t-field="o.credit_eng" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; text-align:center;" rowspan="5">Total des engagements : <p t-field="o.mnt_tot_eng"/></td>-->
                            <!-- <td style = "border:1px solid; width:100px;">Cumul des engagements antérieurs</td> -->
                            <td><span t-field="o.cumul" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; width:100px;">Crédits disponibles</td> -->
                            <td><span t-field="o.credit_disponible" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; width:100px;">Présent engagement</td> -->
                            <td><span t-field="o.mnt_eng" style = "text-align:center;"/> </td>
                            <!-- <td style = "border:1px solid; width:50px;">Nouveau disponible</td> -->
                            <td><span t-field="o.mnt_tot_eng" style = "text-align:center;"/></td>
                            <td><span t-field="o.mnt_lbudg_ap" style = "text-align:center;"/></td>
                    </tbody>
                </table><br/>
				
                <table style ="width:100%;">
                    
                        <tr>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Objet</th>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Montant</th>
                            
                        </tr>                      
                   
                        <tr>
                        <td class="marge"><p t-field="o.lb_obj"/></td>
                        <td rowspan="3"><p t-field="o.mnt_eng" style = "text-align:center;"/></td>  
                        </tr>

                        <tr>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Bénéficiaire/Fournisseur</th>
                        </tr>
                        <tr>
                            <td class="marge"><p t-field="o.no_beneficiaire"/> </td>
                        </tr>
                </table>  <br/>   
                         <table style ="width:100%;">
                         <thead style ="border : 1px solid #000000;">
	                            <th style = "border:1px solid; background-color: #d0d3d4;">Pièces justificatives</th>
	                            <th style = "border:1px solid; background-color: #d0d3d4;">Références</th>
	                     </thead>
	                     <tbody>  
	                        <tr t-foreach="request.env['budg_piece_engagement'].search([('eng_id', '=', o.id)])" t-as="l">
		                        <td class="marge"><span t-field="l.lb_long"/></td> 
		                        <td class="marge"><span t-field="l.ref"/></td>
	                        </tr>
                        </tbody>
                 </table>                   
                <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté le présent engagement à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_eng"/>) francs CFA 
                        <br/><br/><br/>
                       
                        <div>
							<div style="float:left">
	                        	
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité</span></strong>
	                        </div>
	                        <div style="float:right">
	                        	<strong style="font-family : Times New Roman;">L'Ordonnateur</strong>
	                        </div>
						</div>
                     <div>
                     </div>
                </div>
             </t>
        </t>
    </t>
</template>




<report id = "report_engagement_new_rub"
    string = "Engagement Rubrique"
    model = "budg_engagement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_engagement_new_rub"
    name = "sigepe_budget.report_engagement_view_new_rub"
	print_report_name="'ENG - %s' % (object.no_eng)"
    menu = "True"/>


<template id="report_engagement_view_new_rub">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">BON D'ENGAGEMENT DE DEPENSE</h2>
                     <strong>Référence bon d'engagement :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_eng"/> du <span t-field="o.dt_etat"/>
               	<br/>
               	
               
               <div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="6">Imputation</th>
               
               <tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sect</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
					<th style = "border:1px solid; height:30px; width:60px;">Rub</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>
				   
				   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_rubrique_id.rubrique"/></td>

               </table>
               </div>
				<!--<div>
				<h6><span t-field="o.cd_paragraphe_id.paragraphe.lb_long"/></h6>
				</div>-->
	            
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 1px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr style="height:150px; width:250px;"><td style="height:150px;"></td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        
                        td {
                            border : 1px solid black;
                            text-align : center;
                            font-family : Times New Roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #dddddd;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	
                        }
                        
						
						.marge {
								margin-left: 5em;
								text-align : left;
								font-family : Times New  Roman !important;
								border : 0px solid black;
								text-indent : 10px;
								
								}
                    </style>
               </head>
				<br/>
                <table style ="width:100%;">


                        <thead>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px; text-align:center;">Crédits ouverts</th>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px;text-align:center;">Cumul des engagements antérieurs</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Crédits disponibles</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Présent engagement</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Total des engagements</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center;">Nouveau disponible</th>
                        </thead> 
                          
                        <tbody>                  
                            <!-- <td style = "border:1px solid; width:100px;">Crédits ouverts</td>-->
                            <td><span t-field="o.credit_eng" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; text-align:center;" rowspan="5">Total des engagements : <p t-field="o.mnt_tot_eng"/></td>-->
                            <!-- <td style = "border:1px solid; width:100px;">Cumul des engagements antérieurs</td> -->
                            <td><span t-field="o.cumul" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; width:100px;">Crédits disponibles</td> -->
                            <td><span t-field="o.credit_disponible" style = "text-align:center;"/></td>
                            <!-- <td style = "border:1px solid; width:100px;">Présent engagement</td> -->
                            <td><span t-field="o.mnt_eng" style = "text-align:center;"/> </td>
                            <!-- <td style = "border:1px solid; width:50px;">Nouveau disponible</td> -->
                            <td><span t-field="o.mnt_tot_eng" style = "text-align:center;"/></td>
                            <td><span t-field="o.mnt_lbudg_ap" style = "text-align:center;"/></td>
                    </tbody>
                </table><br/>
				
                <table style ="width:100%;">
                    
                        <tr>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Objet</th>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Montant</th>
                            
                        </tr>                      
                   
                        <tr>
                        <td class="marge"><p t-field="o.lb_obj"/></td>
                        <td rowspan="3"><p t-field="o.mnt_eng" style = "text-align:center;"/></td>  
                        </tr>

                        <tr>
                            <th style = "border:1px solid; background-color: #d0d3d4;">Bénéficiaire/Fournisseur</th>
                        </tr>
                        <tr>
                            <td class="marge"><p t-field="o.no_beneficiaire"/> </td>
                        </tr>
                </table>  <br/>   
                         <table style ="width:100%;">
                         <thead style ="border : 1px solid #000000;">
	                            <th style = "border:1px solid; background-color: #d0d3d4;">Pièces justificatives</th>
	                            <th style = "border:1px solid; background-color: #d0d3d4;">Références</th>
	                     </thead>
	                     <tbody>  
	                        <tr t-foreach="request.env['budg_piece_engagement'].search([('eng_id', '=', o.id)])" t-as="l">
		                        <td class="marge"><span t-field="l.lb_long"/></td> 
		                        <td class="marge"><span t-field="l.ref"/></td>
	                        </tr>
                        </tbody>
                 </table>                   
                <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté le présent engagement à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_eng"/>) francs CFA 
                        <br/><br/><br/>
                       
                        <div>
							<div style="float:left">
	                        	
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité</span></strong>
	                        </div>
	                        <div style="float:right">
	                        	<strong style="font-family : Times New Roman;">L'Ordonnateur</strong>
	                        </div>
						</div>
                     <div>
                     </div>
                </div>
             </t>
        </t>
    </t>
</template>




<!--Non utiisé-->

<report id = "report_engagementss"
    string = "Engagement niveau paragraphe"
    model = "budg_engagement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_engagement"
    name = "sigepe_budget.report_engagement_viewss"
    menu = "False"/>


<template id="report_engagement_viewss">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">BON D'ENGAGEMENT DE DEPENSE</h2>
                     <strong>Référence bon d'engagement :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_eng"/> du <span t-field="o.dt_etat"/>
               	<br/>
               	
                   <table class="table table-sm mb32">
               	<tr>
	               	<th style = "border:1px solid; width:2% ">Tit</th>
	               	<th style = "border:1px solid;" width="2%" >Sec</th>
	               	<th style = "border:1px solid;" width="2%">Chap</th>
	               	<th style = "border:1px solid;" width="2%">Art</th>
	               	<th style = "border:1px solid;" width="2%">Par</th>
               	</tr>
               	
                   <td style = "width=2%" ><span t-field="o.cd_titre_id"/> </td>
            
                   <td width="2%"><span t-field="o.cd_section_id"/></td>
                   
                   <td width="2%"><span t-field="o.cd_chapitre_id"/></td>
                   
                   <td width="2%"><span t-field="o.cd_article_id"/></td>
                   
                   <td width="2%"><span t-field="o.cd_paragraphe_id"/></td>
                   
               </table>
               <br/>
                           	   
                    <div class="absolute">VISA CONTROLE</div>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 100px;
                                    bottom : 100px;
                                    right : 100px;
                                    weight : 150px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>

                <table class="table table-sm mb32">


                        <tr >
                            <th style ="border:none;"></th>
                            <th style = "border:1px solid;">Montants</th>
                            <th style = "border:1px solid;">Observations</th>
                        </tr>                      
                        <tr>
                            <td style = "border:1px solid;">Crédits ouverts</td>
                            <td style = "border:1px solid;"><p t-field="o.credit_eng" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                            <td style = "border:1px solid; text-align:center;" rowspan="5">Total des engagements : <p t-field="o.mnt_tot_eng"/></td>
                        </tr>
                        <tr>
                            <td style = "border:1px solid;">Cumul des engagements antérieurs</td>
                            <td style = "border:1px solid;"><p t-field="o.credit_eng" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td style = "border:1px solid;">Crédits disponibles</td>
                            <td style = "border:1px solid;"><p t-field="o.credit_dispo" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td style = "border:1px solid;">Présent engagement</td>
                            <td style = "border:1px solid;"> <p t-field="o.mnt_eng" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td style = "border:1px solid;">Nouveau disponible</td>
                            <td style = "border:1px solid;"><p t-field="o.mnt_lbudg_ap" style = "text-align:right;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr> 
                    
                </table><br/>

                <table class="table table-sm mb32">
                    
                        <tr>
                            <th style = "border:1px solid;">Objet</th>
                            <th style = "border:1px solid;">Montant</th>
                            
                        </tr>                      
                   
                        <tr>
                        <td style = "border:1px solid;"><p t-field="o.lb_obj"/></td>
                        <td style = "border:1px solid;" rowspan="3"><p t-field="o.mnt_eng" style = "text-align:center;" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>  
                        </tr>

                        <tr>
                            <th style = "border:1px solid;">Bénéficiaire/Fournisseur</th>
                        </tr>
                        <tr>
                            <td style = "border:1px solid;"><p t-field="o.no_beneficiaire"/> </td>
                        </tr>
                    
                </table>
                
                 <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:1px solid;">Pièces justificatives</th>
                            <th style = "border:1px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_engagement'].search([('eng_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:1px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:1px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table>  
                
                <strong>Arrêté le présent engagement à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_eng"/>) F CFA 
                        <br/><br/><br/>
                       
                        <div>
	                        <div style="float:right">
	                        	
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                        </div>                        
	                        <div style="float:left">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>
						</div>
                        
                </div>
            </t>
        </t>
    </t>
</template>




 <report id = "report_liqords"
    string = "Liquidation"
    model = "budg_liqord"
    report_type = "qweb-html"
    file = "sigepe_budget.report_liqord"
    name = "sigepe_budget.report_liqord_view"
    menu = "False"/>


    <template id="report_liqord_view">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 style="position: center;">BON DE LIQUIDATION</h2>
                 
                <strong>Référence bon de liquidation :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_lo"/> du <span t-field="o.dt_etat"/>
               	<br/><br/>
               	
               	   <strong>N° Engagement :</strong>               
                   <tr><span t-field="o.no_eng"/> </tr><br/>
               	
                   <strong>Titre :</strong>               
                   <tr><span t-field="o.cd_titre_id"/> </tr><br/>
            
                   <strong>Section :</strong>
                   <tr><span t-field="o.cd_section_id"/></tr><br/>
                   
               	   <strong>Chapitre :</strong>
                   <tr><span t-field="o.cd_chapitre_id"/></tr><br/>
                   
                   <strong>Article :</strong>
                   <tr><span t-field="o.cd_article_id"/></tr><br/>
                   
                   <strong>Paragraphe :</strong>
                   <tr><span t-field="o.cd_paragraphe_id"/></tr><br/>
                   
                   <strong>Rubrique :</strong>
                   <tr><span t-field="o.cd_rubrique_id"/></tr>
               	   <br/><br/>
               
					 <div class="absolute">VISA CONTROLE</div>
					
               <head>
                  <style type="text/css">
                             div.absolute {position:absolute;
                                    top : 210px;
                                    bottom : 100px;
                                    right : 200px;
                                    weight : 150px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        th{
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                            border:2px solid;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }                 
						
						
						.marge {
								margin-left: 5em;
								text-align : left;
								font-family : times new roman;
								font-family : Times New Roman;
								border : 0px solid black;
								text-indent : 10px;
								}
                    </style>
               </head>

                <table class="table table-sm mb32">
                        <tr>
                            <th style ="border:none;"></th>
                            <th style = "border:2px solid;">Montants</th>
                            <th style = "border:2px solid;">Observations</th>
                        </tr>                      
                        <tr>
                            <td style = "border:2px solid;">Engagement</td>
                            <td><p t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                            <td style= "text-align:center;" rowspan="5">Total des liquidations : <p style= "text-align:center;" t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td >Total liquidation sur engagement</td>
                            <td><p t-field="o.total_liq_engs" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td>Disponible sur engagement</td>
                            <td><p t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td>Présente liquidation</td>
                            <td> <p t-field="o.mnt_paye" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td>Nouveau disponible sur engagement</td>
                            <td><p t-field="o.dispo_engs"/></td>
                        </tr> 
                    
                </table><br/>

                <table class="table table-sm mb32">
                    
                        <tr>
                            <th style = "border:2px solid;">Objet</th>
                            <th style = "border:2px solid;">Montant</th>
                        </tr>                      
                   
                        <tr>
                        <td style = "border:2px solid;"><p t-field="o.lb_obj"/></td>
                        <td style = "border:2px solid;" rowspan="5"><span t-field="o.mnt_eng"/></td>  
                        </tr>

                        <tr>
                            <td style = "border:2px solid;">Bénéficiaire/Fournisseur</td>
                        </tr>
                        <tr>
                            <td style = "border:2px solid;"><p t-field="o.no_beneficiaire"/> </td>
                        </tr>
                    
                </table>
                
                <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:2px solid;">Pièces justificatives</th>
                            <th style = "border:2px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_liq'].search([('liq_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:2px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:2px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table> 
                
                <strong>Arrêté la présente liquidation à la somme de :</strong> <span t-field="o.text_amount"/>(<span t-field="o.mnt_paye"/>) francs CFA
                        <br/><br/><br/>
                        
                        <div style="float:right">
                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        <strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
                        </div>
                
                </div>
            </t>
        </t>
    </t>
</template>




 <report id = "report_liqords_new"
    string = "Liquidation"
    model = "budg_liqord"
    report_type = "qweb-html"
    file = "sigepe_budget.report_liqords_new"
    name = "sigepe_budget.report_liqords_view_new"
	print_report_name="'LIQ - %s' % (object.no_lo)"
    menu = "True"/>

<template id="report_liqords_view_new">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h4 style="position: center;">BON DE LIQUIDATION N° <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_lo"/> du <span t-field="o.dt_etat"/></h4>
                 
                <!--<strong>Référence bon de liquidation :</strong> <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_lo"/> du <span t-field="o.dt_etat"/>
               	<br/>-->
               	
               	<div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="5">Imputation</th>
               <!--	<th style ="border : 2px solid #000000; text-align:left; width:350px;" rowspan="2">Intitulé</th>-->
               	<tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sec</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>

                  <!-- <td style="height:30px; width:60px; text-align:left;"><span t-field="o.cd_paragraphe_id.paragraphe.lb_long"/></td>-->

                   
               </table>
               </div>
              
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 2px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr><td style="height:150px;">'</td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
   
					
               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        
                        td {
                            border : 1px solid black;
                            font-family : Times New Roman;
							text-align : left;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h4 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #d0d3d4;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	font-family : Times New Roman;
                        }
						
						.marge {
								margin-left: 5em;
								text-align : left;
								font-family : times new roman;
								font-family : Times New Roman;
								border : 0px solid black;
								text-indent : 10px;
								}
                        
                    </style>
               </head>
				<br/>
               
               
               
               <table style ="width:100%;">


                        <thead>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px; text-align:center; font-family : Times New Roman;">Engagement</th>
                            <th style = "border:1px solid ;background-color: #d0d3d4; width:25px;text-align:center; font-family : Times New Roman;">Total liquidation sur engagement</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center; font-family : Times New Roman;">Disponible sur engagement</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center; font-family : Times New Roman;">Présente liquidation</th>
                            <th style = "border:1px solid; background-color: #d0d3d4; width:50px;text-align:center; font-family : Times New Roman;">Reste à liquider</th>
                        </thead> 
                          
                        <tbody>                  
                            <td style = "border:1px solid; width:25px; text-align:right; font-family : Times New Roman;"><span t-field="o.mnt_eng"/></td>
                            <td style = "border:1px solid; width:25px; text-align:right; font-family : Times New Roman;"><span t-esc="'{:,}'.format(int(o.total_liq_engs)).replace(',', ' ')"/></td>
                            <td style = "border:1px solid; width:25px; text-align:right; font-family : Times New Roman;"><span t-field="o.mnt_eng"/></td>
                            <td style = "border:1px solid; width:25px; text-align:right; font-family : Times New Roman;"><span t-field="o.mnt_paye"/></td>
                            <td style = "border:1px solid; width:25px; text-align:right; font-family : Times New Roman;"><span t-field="o.res_liq"/></td>
                    </tbody>
                </table><br/>
               
               

                <!-- <table class="table table-sm mb32">
                        <tr>
                            <th style ="border:none;"></th>
                            <th style = "border:2px solid;">Montants</th>
                            <th style = "border:2px solid;">Observations</th>
                        </tr>                      
                        <tr>
                            <td style = "border:2px solid;">Engagement</td>
                            <td><p t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                            <td style= "text-align:center;" rowspan="5">Total des liquidations : <p style= "text-align:center;" t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td >Total liquidation sur engagement</td>
                            <td><p t-field="o.total_liq_engs" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td>Disponible sur engagement</td>
                            <td><p t-field="o.mnt_eng" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                        <tr>
                            <td>Présente liquidation</td>
                            <td> <p t-field="o.mnt_paye" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/> </td>
                        </tr>
                        <tr>
                            <td>Nouveau disponible sur engagement</td>
                            <td><p t-field="o.dispo_engs" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td>
                        </tr> 
                    
                </table><br/> -->

                <table style ="width:100%;">
                    
                        <tr>
                            <th style = "border:0px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Objet</th>
                            <th style = "border:0px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">Montant</th>
                            
                        </tr>                      
                   
                        <tr>
                        <td class="marge" ><span t-field="o.lb_obj"/></td>
                        <td class="marge" rowspan="3"><span t-field="o.mnt_eng"/></td>  
                        </tr>

                        <tr>
                            <th style = "border:0px solid; text-align:left; background-color: #d0d3d4;">Bénéficiaire/Fournisseur</th>
                        </tr>
                        <tr>
                            <td class="marge"><span t-field="o.no_beneficiaire"/> </td>
                        </tr>
                </table>  <br/>
                
                  <table style ="width:100%;">
                         <thead style ="border : 0px solid #000000;">
	                            <th style = "border:0px solid; text-align:left; background-color: #d0d3d4;">Pièces justificatives</th>
	                            <th style = "border:0px solid; text-align:left; background-color: #d0d3d4;">Références</th>
	                     </thead>
	                     <tbody>  
	                        <tr t-foreach="request.env['budg_piece_liq'].search([('liq_id', '=', o.id)])" t-as="l">
		                        <td class="marge"><span t-field="l.lb_long"/></td> 
		                        <td class="marge"><span t-field="l.ref"/></td>
	                        </tr>
                        </tbody>
                 </table>                   
                <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté la présente liquidation à la somme de :</strong> <span t-field="o.text_amount"/> (<span t-field="o.mnt_paye"/>) francs CFA
                        <br/><br/>
                        
                        <div style="float:right">
                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
							<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>

                        </div>
                
                </div>
            </t>
        </t>
    </t>
</template>



<!--
<report id = "report_mandat"
    string = "Mandat niveau rubrique"
    model = "budg_mandat"
    report_type = "qweb-html"
    file = "sigepe_budget.report_mandat"
    name = "sigepe_budget.report_mandat_view"
    menu = "False"/>


<template id="report_mandat_view">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">MANDAT DE PAIEMENT</h2>
                     
                <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_mandat"/> du <span t-field="o.dt_etat"/><br/>
                    
                
                     
                   <strong>N° Engagement :</strong>
                   <tr><span t-field="o.no_eng"/></tr><br/>
                             
                   
                    <strong>N° Liquidation :</strong>
                    <tr><span t-field="o.no_lo"/></tr><br/>
                                    
                   <strong>Titre :</strong>
                   <tr><span t-field="o.cd_titre_id"/> </tr><br/>
            
            		<strong>Section :</strong>
                   <tr><span t-field="o.cd_section_id"/></tr><br/>
               
               		<strong>Chapitre :</strong>
                   <tr><span t-field="o.cd_chapitre_id"/></tr><br/>
                
                	<strong>Article :</strong>
                   <tr><span t-field="o.cd_article_id"/></tr><br/>
                
                	<strong>Paragraphe :</strong>
                   <tr><span t-field="o.cd_paragraphe_id"/></tr><br/>
                   
                   <strong>Rubrique :</strong>
                   <tr><span t-field="o.cd_rubrique_id"/></tr>
              
               
                    <div class="absolute">VISA CONTROLE</div>


               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 100px;
                                    bottom : 50px;
                                    right : 100px;
                                    weight : 150px;
                                    height : 100px;
                                    border : 3px solid;
                        }
                        th,
                        td {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>

                <table class="table table-sm mb32">

                        <tr>
                            <td style = "border:2px solid;">Bénéficiaire/Fournisseur</td>
                            <th style = "border:2px solid;">Objet de la dépense</th>
                            <th style = "border:2px solid;">Montants</th>
                        </tr>                      
                        <tr>
                        	<td style = "border:2px solid;"><p t-field="o.no_beneficiaire"/> </td>
                            <td style = "border:2px solid;"><p t-field="o.obj"/></td>
                            <td style = "border:2px solid;"><p t-field="o.mnt_eng" style='text-align:right;' t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/></td> 
                        </tr>
                        
                </table>
                
                <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:2px solid;">Pièces justificatives</th>
                            <th style = "border:2px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_ord'].search([('mandat_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:2px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:2px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table> 
                
                <strong>Arrêté le présent mandat à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.mnt_ord"/>) F CFA
                        <br/><br/><br/>                                     
                        
                        <div>
	                        <div style="float:left;">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>                             
							
						<div style="float:right">
                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
							<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">L'Agent Comptable:</span></strong>

                        </div>
                
                        </div>
                </div>
            </t>
        </t>
    </t>
</template>


<report id = "report_mandatss"
    string = "Mandat"
    model = "budg_mandat"
    report_type = "qweb-html"
    file = "sigepe_budget.report_mandatss"
    name = "sigepe_budget.report_mandatss_view"
    menu = "True"/>


<template id="report_mandatss_view">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">MANDAT DE PAIEMENT</h2>
                
                <strong>Référence mandat :</strong>   
                <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_mandat"/> du <span t-field="o.dt_etat"/><br/>
                    
                
                     
                   <strong>N° Engagement :</strong>
                   <tr><span t-field="o.no_eng"/></tr><br/>
                             
                   
                    <strong>N° Liquidation :</strong>
                    <tr><span t-field="o.no_lo"/></tr><br/>
                                    
                <div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="6">Imputation</th>
               	<th style ="border : 2px solid #000000; text-align:center; width:300px;" rowspan="2">Intitulé</th>
               	<tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sec</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Rub</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>

                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_rubrique_id"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_rubrique_id.lb_long"/></td>

                   
               </table>
               </div>
              
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 2px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr><td style="height:150px;">'</td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
   
					
               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        th,
                        td {
                            border : 1px solid black;
                            text-align : center;
                            font-family : Times New Roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #d0d3d4;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	font-family : Times New Roman;
                        }
                        
                    </style>
               </head>
				<br/>
                <table style ="width:100%;">

                        <thead>
                        <tr>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" colspan='3'>Informations Bénéficiaire/Fournisseur</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" rowspan='2'>Objet de la dépense</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" rowspan='2'>Montant</th>
                        </tr>
                        <tr>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">Nom</th>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">Banque</th>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">N° Compte</th>
                        </tr>
                            
                        </thead>                      
                        <tbody>
                        
                        	<td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.no_beneficiaire"/> </td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.banque"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.numcompte"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.obj"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.mnt_eng"/></td> 
                        </tbody>
                        
                </table><br/>
                
                <table style ="width:100%;">
                	<thead>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Pièces justificatives</th>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Référence</th>
                    </thead>
                    <tbody>
                        <tr t-foreach="request.env['budg_piece_ord'].search([('mandat_id', '=', o.id)])" t-as="l">
                        <td style = "border:1px solid; text-align:left; font-family : Times New Roman;"><span t-field="l.lb_long"/></td> 
                        <td style = "border:1px solid; text-align:left; font-family : Times New Roman;"><span t-field="l.ref"/></td>
                        </tr>
                    </tbody>
                 </table> <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté le présent mandat à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_ord"/>) F CFA
                        <br/><br/><br/>                                     
                                    
                        
                        <div>
	                        <div style="float:left;">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>                        
	                        <div style="float:right">
                        	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
							

                        </div>
                        </div>
                </div>
            </t>
        </t>
    </t>
</template>




<report id = "report_mandats"
    string = "Mandat niveau paragraphe"
    model = "budg_mandat"
    report_type = "qweb-html"
    file = "sigepe_budget.report_mandats"
    name = "sigepe_budget.report_mandats_views"
    menu = "True"/>


<template id="report_mandats_views">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">MANDAT DE PAIEMENT</h2>
                    
                    
                   <strong style="font-family : Times New Roman;">Référence mandat :</strong> 
                   <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_mandat"/> du <span t-field="o.dt_etat"/><br/>
                    
                   <strong style="font-family : Times New Roman;">N° Engagement :</strong>
                   <tr><span t-field="o.no_eng"/></tr><br/>
                   
                   <strong style="font-family : Times New Roman;">N° Liquidation :</strong>
                   <tr><span t-field="o.no_lo"/></tr><br/>
                                    
                    <div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="5">Imputation</th>
               	<th style ="border : 2px solid #000000; text-align:center; width:400px;" rowspan="2">Intitulé</th>
               	<tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sec</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>

                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.lb_long"/></td>

               </table>
               </div>
              
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 2px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr><td style="height:150px;">'</td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
   
					
               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        th,
                        td {
                            border : 1px solid black;
                            text-align : center;
                            font-family : Times New Roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #d0d3d4;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	font-family : Times New Roman;
                        }
                        
                    </style>
               </head>
				<br/>
                <table style ="width:100%;">

                        <thead>
                        <tr>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" colspan='3'>Informations Bénéficiaire/Fournisseur</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" rowspan='2'>Objet de la dépense</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;" rowspan='2'>Montant</th>
                        </tr>
                        <tr>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">Nom</th>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">Banque</th>
                            <th style = "border:1px solid; text-align:center; font-family : Times New Roman;">N° Compte</th>
                        </tr>
                            
                        </thead>                      
                        <tbody>
                        
                        	<td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.no_beneficiaire"/> </td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.banque"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.numcompte"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.obj"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.mnt_eng"/></td> 
                        </tbody>
                        
                </table><br/>
                
                <table style ="width:100%;">
                	<thead>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Pièces justificatives</th>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Référence</th>
                    </thead>
                    <tbody>
                        <tr t-foreach="request.env['budg_piece_ord'].search([('mandat_id', '=', o.id)])" t-as="l">
                        <td style = "border:1px solid; text-align:left; font-family : Times New Roman;"><span t-field="l.lb_long"/></td> 
                        <td style = "border:1px solid; text-align:left; font-family : Times New Roman;"><span t-field="l.ref"/></td>
                        </tr>
                    </tbody>
                 </table> <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté le présent mandat à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_ord"/>) F CFA
                        <br/><br/><br/>                                     
                        
                        <div>
	                        <div style="float:left; font-family : Times New Roman;">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>                        
	                        <div style="float:right; font-family : Times New Roman;">
	                        	<strong>Le Directeur des Finances et de la Comptabilité</strong>
	                        </div>
                        </div>
                </div>
            </t>
        </t>
    </t>
</template>
-->

<report id = "report_mandats"
    string = "Mandat"
    model = "budg_mandat"
    report_type = "qweb-html"
    file = "sigepe_budget.report_mandats"
    name = "sigepe_budget.report_mandats_views"
	print_report_name="'MANDAT - %s' % (object.no_mandat)"
    menu = "True"/>


<template id="report_mandats_views">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h4 class="solid">MANDAT DE PAIEMENT N° <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_mandat"/> du <span t-field="o.dt_etat"/></h4>
                    
                    
                   <!--<strong style="font-family : Times New Roman;">Référence mandat :</strong> 
                   <span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.no_mandat"/> du <span t-field="o.dt_etat"/><br/>-->
                    
                   <h6 style="font-family : Times New Roman;">Eng. N° : <span t-field="o.no_eng"/> / Liq N° : <span t-field="o.no_lo"/></h6>

                    <div>
               	<div class="g">
                <table>
               	<th style ="border : 2px solid #000000; text-align:center;" colspan="5">Imputation</th>
               	
               	<tr>
	               	<th style = "border:1px solid; height:30px; width:60px;">Titre</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Sec</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Chap</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Art</th>
	               	<th style = "border:1px solid; height:30px; width:60px;">Parag</th>
               	</tr>
               	
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_titre_id.titre.cd_titre"/> </td>
            
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_section_id.section.cd_section"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_chapitre_id.chapitre.cd_chapitre"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_article_id.article.cd_article"/></td>
                   
                   <td style="height:30px; width:60px; text-align:center;"><span t-field="o.cd_paragraphe_id.paragraphe.cd_paragraphe"/></td>
                 

               </table>
               </div>
              
	               <div class="d">
	                 <table>
		               <thead>
		                	<th style ="border : 2px solid #000000; width:250px; text-align:center;">VISA CONTROLE</th>
		               </thead>
		               <tbody>
		                    <tr><td style="height:150px;">'</td></tr>
		               </tbody>
		             </table>
	               </div>
               </div>
               
               <br/>
   
					
               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 150px;
                                    bottom : 75px;
                                    right : 100px;
                                    weight : 200px;
                                    height : 150px;
                                    border : 3px solid;
                        }
                        .g {
                        	float : left;
                        }
                        
                        .d {
                        	float : right;
                        }
                        
                        .c {
                        	float : center;
                        }
                        
                        th,
                        td {
                            border : 1px solid black;
                            text-align : center;
                            font-family : Times New Roman;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        h4 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: #d0d3d4;
                            font-family : Times New Roman;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                        .taille1 {
                        	font-size : small;
                        	font-family : Times New Roman;
                        }
						
						.marge {
								margin-left: 5em;
								text-align : left;
								font-family : times new roman;
								font-family : Times New Roman;
								border : 0px solid black;
								text-indent : 10px;
								}
                        
                    </style>
               </head>
				<br/>
                <table style ="width:100%;">

                        <thead>
                        <tr>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">Bénéficiaire/Fournisseur</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">Objet de la dépense</th>
                            <th style = "border:2px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">Montant</th>
                        </tr>
                       
                            
                        </thead>                      
                        <tbody>
                        
                        	<td style = "border:1px solid; text-align:left; font-family : Times New Roman; text-indent : 10px;"><span t-field="o.no_beneficiaire"/> </td>
                            <td style = "border:1px solid; text-align:left; font-family : Times New Roman;"><span t-field="o.obj"/></td>
                            <td style = "border:1px solid; text-align:right; font-family : Times New Roman;"><span t-field="o.mnt_eng"/></td>
                        </tbody>
                        
                </table><br/>
				
				<table style ="width:100%;">
				<thead>
						<tr>
                            <th style = "border:1px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">Banque</th>
                            <th style = "border:1px solid; text-align:center; background-color: #d0d3d4; font-family : Times New Roman;">N° Compte</th>
                        </tr>
						
						<tbody>                     
						     <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.bank_id"/></td>
                            <td style = "border:1px solid; text-align:center; font-family : Times New Roman;"><span t-field="o.num_compte"/></td>
                        </tbody>
				</thead>
				</table><br/>
                
                <table style ="width:100%;">
                	<thead>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Pièces justificatives</th>
                         <th style = "border:2px solid; text-align:left; background-color: #d0d3d4; font-family : Times New Roman;">Référence</th>
                    </thead>
                    <tbody>
                        <tr t-foreach="request.env['budg_piece_ord'].search([('mandat_id', '=', o.id)])" t-as="l">
                        <td class="marge" ><span t-field="l.lb_long"/></td> 
                        <td class="marge"><span t-field="l.ref"/></td>
                        </tr>
                    </tbody>
                 </table> <br/>
                
                <strong style="font-family : Times New Roman;">Arrêté le présent mandat à la somme de : </strong><span t-field="o.text_amount"/> (<span t-field="o.mnt_ord"/>) francs CFA
                        <br/><br/><br/>                                     
                        
                        <div>
	                        <div style="float:left; font-family : Times New Roman;">
	                        	<strong>L'Ordonnateur</strong>
	                        </div>                        
	                        <div style="float:right; font-family : Times New Roman;">
								<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                            <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
							
	                        </div>
                        </div>
				</div>
            </t>
        </t>
    </t>
</template>




 <report id = "report_bordeng"
    string = "Bordereau engagement"
    model = "budg_bordereau_engagement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_bordeng"
    name = "sigepe_budget.report_bordeng_view"
    menu = "True"/>


<template id="report_bordeng_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Bordereau d'engagement N°<span t-field="o.no_bord_en"/></h2><br/><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        th,
                        td {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                            border : 2px solid black;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                        <table class="table table-sm mb32">
                              
                              <thead>
                              <tr>          
                                <th style = "border:2px solid; text-align:center;" rowspan="2">N° Eng</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Date</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Objet de la dépense</th>      	
                               <!--<th style = "border:2px solid;" colspan="4" align="center">Imputation</th>-->
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Bénéficiaire</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Montant</th>
                            </tr>
                            <tr>
                                
                                <!-- <th style = "border:2px solid;">Chap</th>
                                <th style = "border:2px solid;">Art</th>
                                <th style = "border:2px solid;">Para</th>
                                <th style = "border:2px solid;">Rub</th>-->
                              </tr>
                              </thead>
                              <tr t-foreach="o.engagement_ids" t-as="eng">
	                             <td  style = "border:2px solid; text-align:center;"><span t-esc="eng.no_eng"/></td>
	                             <td  style = "border:2px solid; text-align:center;"><span t-esc="eng.dt_etat"/></td>
                               	 <td  style = "border:2px solid; text-align:center;"><span t-esc="eng.lb_obj"/></td>
                                 <!-- <td  style = "border:2px solid;"><span t-esc="eng.cd_chapitre_id.chapitre.chapitre"/></td>
                              	 <td  style = "border:2px solid;"><span t-esc="eng.cd_article_id.article.article"/></td>
                              	 <td  style = "border:2px solid;"><span t-esc="eng.cd_paragraphe_id.paragraphe.paragraphe"/></td>
                              	 <td  style = "border:2px solid;"><span t-esc="eng.cd_rubrique_id.concate_rubrique"/></td>-->
                              	 <td  style = "border:2px solid; text-align:center;"><span t-esc="eng.no_beneficiaire.nm"/></td>
                              	 <td style = "border:2px solid; text-align:right;"><span t-esc="eng.mnt_eng"/></td>
                              </tr>
                             <tr>
                               <td colspan="4">Total général du précédent bordereau</td>
                                <td style = "text-align:right;"><span t-field="o.total_prec"/></td>
                             </tr>
                             <tr>
                               <td colspan="4">Total général du présent bordereau</td>
                                <td style = "text-align:right;"><span t-field="o.totaux"/></td>
                             </tr>
                        </table>
                        
                        <strong>Arrêté le présent bordereau d'engagement à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.totaux"/>) francs CFA
                        
                        <br/><br/><br/>
                        
                        <div>	                        	                        
	                        <div style="float:left;">                  	
								<t t-if ="o.state in ('T','RD') ">
								    <strong>Par :</strong><br/>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité</span></strong>
								</t>
								
								<t t-if ="o.state in ('R','V') ">
									<strong>Par :<br/>Le contrôle</strong>
								</t>
								
	                        </div>
							
							<div style="float:right;">
								<t t-if ="o.state in ('T','RD') ">
									<strong>Pour :<br/>Le Contrôle</strong>
								</t>
								
								<t t-if ="o.state in ('R','V') ">
								<strong>Pour :</strong><br/>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité</span></strong>						
								</t>
	                        </div>
                        </div>
                        
                     </div>
                </t>
             </t>
        </t>
</template>


<report id = "report_bordliq"
    string = "Bordereau liquidation"
    model = "budg_bordereau_liquidation"
    report_type = "qweb-html"
    file = "sigepe_budget.report_bordliq"
    name = "sigepe_budget.report_bordliq_view"
    menu = "True"/>


<template id="report_bordliq_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Bordereau de liquidation N° <span t-field="o.no_bord_liq1"/></h2><br/><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                        <table class="table table-sm mb32">
                          <thead>
                            <tr>
                                           
                                <th style = "border:2px solid; text-align:center;" rowspan="2">N° Liq</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Date</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Objet de la dépense</th>      	
                               <!--  <th colspan="4" align="center">Imputation</th>-->
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Bénéficiaire</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Montant</th>
                                <th style = "border:2px solid; text-align:center;" colspan="2">Engagement</th>
                            </tr>
                            
                            <tr> 
                                <th style = "border:2px solid; text-align:center;">Date Eng</th>
                                <th style = "border:2px solid; text-align:center;">Ref Eng</th>
                            </tr>
                                </thead>
                              <tr t-foreach="o.liquidation_ids" t-as="liq">
	                             <td style = "border:2px solid; text-align:center;"><span t-field="liq.no_lo"/></td>
	                             <td style = "border:2px solid; text-align:center;"><span t-field="o.date_emis"/></td>
                               	 <td style = "border:2px solid; text-align:center;"><span t-field="liq.lb_obj"/></td>
                                 <!-- <td><span t-field="liq.cd_chapitre_id"/></td>
                              	 <td><span t-field="liq.cd_article_id"/></td>
                              	 <td><span t-field="liq.cd_paragraphe_id"/></td>
                              	 <td><span t-field="liq.cd_rubrique_id"/></td>-->
                              	 <td style = "border:2px solid; text-align:center;"><span t-field="liq.no_beneficiaire"/></td>
                              	 <td style = "border:2px solid; text-align:right;"><span t-field="liq.mnt_paye"/></td>                              
                              	 <td style = "border:2px solid;"><span t-field="liq.dt_etat"/></td>
                              	 <td style = "border:2px solid;"><span t-field="liq.no_eng"/></td>
                              </tr>
                             
                               <td colspan="6">Total général du présent bordereau</td>
                               <td><span t-field="o.totaux" t-options='{"widget": "monetary", "display_currency": o.company_currency_id}' style = "text-align:left;"/></td>
                        </table>
                          
                        
                        <strong>Arrêté le présent bordereau de liquidation à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.totaux"/>) francs CFA
                        
                        
                        <br/><br/><br/>
                        <div>
                        	<div style="float:left;">
                        		<strong>Réçu par : <br/> Le Contrôleur Financier</strong>
                        	</div>                      
	                         <div style="float:right;">
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                        	<strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                      
	                         </div>
                        </div>
                     </div>
                </t>
             </t>
        </t>
</template>


<report id = "report_bordtitre"
    string = "Bordereau titre de recette"
    model = "budg_bord_titre_recette"
    report_type = "qweb-html"
    file = "sigepe_budget.report_bordtitre"
    name = "sigepe_budget.report_bordtitre_view"
    menu = "True"/>


<template id="report_bordtitre_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Bordereau de titre de recette N° <span t-field="o.no_bord_rec"/></h2><br/><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                        <table class="table table-sm mb32">
                        <thead>
                            <tr>
                                           
                                <th style = "border:2px solid; text-align:center;" rowspan="2">N° Titre</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Date d'émission du titre</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Objet de la recette</th>      	
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Débiteur</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Compte</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Somme à recouvrer</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Date d'encaissement</th>
                                <th style = "border:2px solid; text-align:center;" rowspan="2">Observations</th>
                            </tr>
                            
                           
                              </thead>
                               <tr t-foreach="o.recette_ids" t-as="rec">
	                             <td style = "border:2px solid;"><span t-field="rec.cd_titre_recette"/></td>
	                             <td style = "border:2px solid;"><span t-field="rec.dt_rec"/></td>
                               	 <td style = "border:2px solid;"><span t-field="rec.lb_objet"/></td>
                              	 <td style = "border:2px solid;"><span t-field="rec.contribuable_id"/></td>
                              	 <td style = "border:2px solid;"><span t-field="rec.cd_paragraphe_id"/></td>
                              	 <td style = "border:2px solid;"><span t-field="rec.mnt_rec"/></td>
                              	 <td style = "border:2px solid;"></td>
                              	 <td style = "border:2px solid;"></td>
                              </tr>
                             
                               <td colspan="5">Total général du présent bordereau</td>
                               <td style = "border:2px solid; text-align:right;" colspan="3"><span t-field="o.totaux" style='text-align:right;'/></td>
                        </table>
                        
                        <strong>Arrêté le présent bordereau de titre de recette à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.totaux"/>) francs CFA

                        <br/><br/><br/>
                                               
                        <div>
                        	<div style="float:left;">
                        		<strong>Réçu par : <br/> Le Contrôleur Financier</strong>
                        	</div>                      
	                         <div style="float:right;">
	                        	<strong>Envoyé par : <br/></strong>
	                         <strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                         <strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      
	                         </div>
                        </div>
                                                
                     </div>
                </t>
             </t>
        </t>
</template>


<report id = "report_bordmandats"
    string = "Bordereau d'annulation de mandat"
    model = "budg_bordereau_mandat_annule"
    report_type = "qweb-html"
    file = "sigepe_budget.report_bordmandats"
    name = "sigepe_budget.report_bordmandats_view"
    menu = "True"/>


<template id="report_bordmandats_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Bordereau d'annulation de mandat</h2><br/><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                        <table class="table table-sm mb32">
                        <thead>
                            <tr>
                                           
                                <th style = "border:2px solid; text-align:center;" >N° Mdt</th>
                                <th style = "border:2px solid; text-align:center;" >Objet de la dépense</th>      	
                                <th style = "border:2px solid; text-align:center;" >Bénéficiaire</th>
                                <th style = "border:2px solid; text-align:center;" >Imputation</th>
                                <th style = "border:2px solid; text-align:center;" >Somme à annuler</th>
                            </tr>
                            
                              </thead>
                               <tr t-foreach="o.mandat_ids" t-as="mdt">
	                             <td style = "border:2px solid;"><span t-field="mdt.mandat_id"/></td>
                               	 <td style = "border:2px solid;"><span t-field="mdt.objet"/></td>
                              	 <td style = "border:2px solid;"><span t-field="mdt.nom"/></td>
                              	 <td style = "border:2px solid;"><span t-field="mdt.paragraphe_id"/></td>
                              	 <td style = "border:2px solid;"><span t-field="mdt.montant"/></td>
                              </tr>
                                  <td colspan="4">Total général du présent bordereau</td>
                               <td style = "border:2px solid; text-align:right;" colspan="3"><span t-field="o.totaux" style='text-align:right;' /></td>
               
                        </table>
                        
                        <strong>Arrêté le présent bordereau à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.totaux"/>) francs CFA

                        <br/><br/><br/>
                                               
                        <div>
	                         <div style="float:left;">
	                         <strong><span>L'Ordonnateur</span></strong>
	                         </div>
	                         
	                         <div style="float:right;">
	                         <strong>Date d'annulation</strong><br/>
	                         <span t-field="o.date_emis"/>
	                         </div>
                        </div>
                                                
                     </div>
                </t>
             </t>
        </t>
</template>




 <report id = "report_recette"
    string = "Titre de recette niveau rubrique"
    model = "budg_titrerecette"
    report_type = "qweb-html"
    file = "sigepe_budget.report_recette"
    name = "sigepe_budget.report_recette_view"
    menu = "True"/>

<template id="report_recette_view">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">TITRE DE RECETTE</h2>
                     <strong>Référence titre de recette :</strong><span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.cd_titre_recette"/> du <span t-field="o.dt_rec"/>
               	<br/><br/>
                   <strong>Titre :</strong>               
                   <tr><span t-field="o.cd_titre_id"/> </tr><br/>
            
                   <strong>Section :</strong>
                   <tr><span t-field="o.cd_section_id"/></tr><br/>
                   
               	   <strong>Chapitre :</strong>
                   <tr><span t-field="o.cd_chapitre_id"/></tr><br/>
                   
                   <strong>Article :</strong>
                   <tr><span t-field="o.cd_article_id"/></tr><br/>
                   
                   <strong>Paragraphe :</strong>
                   <tr><span t-field="o.cd_paragraphe_id"/></tr><br/>
                   
                   <strong>Rubrique :</strong>
                   <tr><span t-field="o.cd_rubrique_id"/></tr>
               	   <br/><br/>
               	   
                    <div class="absolute">VISA CONTROLE</div>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 100px;
                                    bottom : 50px;
                                    right : 100px;
                                    weight : 150px;
                                    height : 100px;
                                    border : 3px solid;
                        }
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>


                <table class="table table-sm mb32">
                    
                        <tr>
                            <th style = "border:2px solid;">Objet</th>
                            <th style = "border:2px solid;">Montant</th>
                            <td style = "border:2px solid;">Contribuable/Bailleur</td>
                        </tr>                      
                   
                        <tr>
                        <td style = "border:2px solid;"><p t-field="o.lb_objet"/></td>
                        <td style = "border:2px solid;"><p t-field="o.mnt_rec"/></td>  
                        <td style = "border:2px solid;"><p t-field="o.contribuable_id"/> </td>
                        </tr>
                    
                </table>
                
                <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:2px solid;">Pièces justificatives</th>
                            <th style = "border:2px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_recette'].search([('recette_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:2px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:2px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table> 
                
                <strong>Arrêté le présent titre de recette à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.mnt_rec"/>) francs CFA
                        <br/><br/>
                        
                       <div>
	                         <div style="float:right;">
	                        	<strong>L'ordonnateur</strong>
	                         </div>
                        </div>
                </div>
                
                <img t-att-src="'/report/barcode/?type=%s&amp; value=%s&amp; width=%s&amp;height=%s' %('Code128',o.cd_titre_recette, 100, 100)" alt="Barcode"/>                                          
                <span t-field="o.cd_titre_recette"/> 
            </t>
        </t>
    </t>
</template>


<report id = "report_recette"
    string = "Titre de recette niveau paragraphe"
    model = "budg_titrerecette"
    report_type = "qweb-html"
    file = "sigepe_budget.report_recettes"
    name = "sigepe_budget.report_recette_views"
    menu = "True"/>

<template id="report_recette_views">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                     <h2 class="solid">TITRE DE RECETTE</h2>
                     <strong>Référence titre de recette :</strong><span t-field="o.company_id.code_struct"/>-<span t-field="o.x_exercice_id"/>-<span t-field="o.cd_titre_recette"/> du <span t-field="o.dt_rec"/>
               	<br/><br/>
                   <strong>Titre :</strong>               
                   <tr><span t-field="o.cd_titre_id"/> </tr><br/>
            
                   <strong>Section :</strong>
                   <tr><span t-field="o.cd_section_id"/></tr><br/>
                   
               	   <strong>Chapitre :</strong>
                   <tr><span t-field="o.cd_chapitre_id"/></tr><br/>
                   
                   <strong>Article :</strong>
                   <tr><span t-field="o.cd_article_id"/></tr><br/>
                   
                   <strong>Paragraphe :</strong>
                   <tr><span t-field="o.cd_paragraphe_id"/></tr><br/>
                   
               	   <br/><br/>
               	   
                    <div class="absolute">VISA CONTROLE</div>
				

               <head>
                   <style type="text/css">
                        div.absolute {position:absolute;
                                    top : 100px;
                                    bottom : 50px;
                                    right : 100px;
                                    weight : 150px;
                                    height : 100px;
                                    border : 3px solid;
                        }
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>


                <table class="table table-sm mb32">
                    
                        <tr>
                            <th style = "border:2px solid;">Objet</th>
                            <th style = "border:2px solid;">Montant</th>
                            <th style = "border:2px solid;">Contribuable/Bailleur</th>
                        </tr>                      
                   
                        <tr>
                        <td style = "border:2px solid;"><p t-field="o.lb_objet"/></td>
                        <td style = "border:2px solid;"><p t-field="o.mnt_rec"/></td>  
                        <td style = "border:2px solid;"><p t-field="o.contribuable_id"/> </td>
                        </tr>
                    
                </table>
                
                <table class="table table-sm mb32">
                        <tr>
                            <th style = "border:2px solid;">Pièces justificatives</th>
                            <th style = "border:2px solid;">Référence</th>
                        </tr> 
                        <tr t-foreach="request.env['budg_piece_recette'].search([('recette_id', '=', o.id)])" t-as="l">
                        <tr>
                        <td style = "border:2px solid;" rowspan="3"><span t-field="l.lb_long"/></td> 
                        </tr>
                        <tr>
                        <td style = "border:2px solid;"><span t-field="l.ref"/></td>
                        </tr>
                        </tr>
                 </table> 
                
                <strong>Arrêté le présent titre de recette à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.mnt_rec"/>) francs CFA
                        <br/><br/>
                        
                       <div>
	                         <div style="float:right;">
	                        	<strong>L'ordonnateur</strong>
	                         </div>
                        </div>
                </div>
            </t>
        </t>
    </t>
</template>



<report id = "report_balance_dep"
    string = "Balance des dépenses"
    model = "budg_balance"
    report_type = "qweb-html"
    file = "sigepe_budget.report_balance_dep"
    name = "sigepe_budget.report_balance_view"
    menu = "True"/>
    
    <template id="report_balance_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2><span t-field="o.concate"/></h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> 
                        <head>
                        
                   <style type="text/css">
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">Numéro compte</th>
                                <th style ="border : 2px solid #000000;">Libellé</th>
                                <th style ="border : 2px solid #000000;">Budget</th>
                                <th style ="border : 2px solid #000000;">Engagements</th>
                                <th style ="border : 2px solid #000000;">Mandats</th>
                              
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.balance_lines" t-as="ligne">                         
                                <td style = "border:1px solid;">
                                    <span t-esc="ligne.numero_compte"/>
                                </td>
                                <td style = "border:1px solid;">
                                    <span t-esc="ligne.libelle"/>
                                </td>
                                <td style = "border:1px solid;">
									<span t-esc="'{:,}'.format(int(ligne.montant_budgetise)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:1px solid;">
									<span t-esc="'{:,}'.format(int(ligne.montant_engagement)).replace(',', ' ')"/>
                                </td>
                                <td style = "border:1px solid;">
									<span t-esc="'{:,}'.format(int(ligne.montant_mandatement)).replace(',', ' ')"/>
                                </td>
                                
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:right">
                <strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	            <strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN' or 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
                </div>             
            </div>
            
        </t>
    </t>
</t>
</template>

<report id = "report_balance_rec"
    string = "Balance des recettes"
    model = "budg_balance"
    report_type = "qweb-html"
    file = "sigepe_budget.report_balance_rec"
    name = "sigepe_budget.report_balance_rec_view"
    menu = "False"/>
    
    <template id="report_balance_rec_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2><span t-field="o.concate"/></h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> 
                        <head>
                        
                   <style type="text/css">
                   
                   div.absolute {position:absolute;
                                    top : 210px;
                                    bottom : 100px;
                                    right : 200px;
                                    weight : 150px;
                                    height : 150px;
                                    border : 3px solid;
                        
                        th,
                        td {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                            border : 2px solid black;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">Numéro compte</th>
                                <th style ="border : 2px solid #000000;">Libellé</th>
                                <th style ="border : 2px solid #000000;">Budget initial</th>
                                <th style ="border : 2px solid #000000;">Titres émis</th>
                                <th style ="border : 2px solid #000000;">Taux de réalisation</th>
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.balance_lines" t-as="ligne">                         
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.numero_compte"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.libelle"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant_budgetise"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant_recette"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant_recette"/>
                                </td>
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:right">
                	<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	                <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
					<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	                      
                </div>
            </div>
            
        </t>
    </t>
</t>
</template>


<report id = "report_jrl_eng"
    string = "Journal des engagements"
    model = "budg_journal_eng"
    report_type = "qweb-html"
    file = "sigepe_budget.report_jrnl_eng"
    name = "sigepe_budget.report_jrnl_eng_view"
    menu = "True"/>
    
    <template id="report_jrnl_eng_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2><span t-field="o.visu"/></h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> 
                        <head>
                        
                   <style type="text/css">
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">Date</th>
                                <th style ="border : 2px solid #000000;">Créancier</th>
                                <th style ="border : 2px solid #000000;">Réf. Engagement</th>
                                <th style ="border : 2px solid #000000;">N° Mandat</th>
                                <th style ="border : 2px solid #000000;">Imputation</th>
                                <th style ="border : 2px solid #000000;">Engagements</th>
                                <th style ="border : 2px solid #000000;">Dégagement</th>
                                <th style ="border : 2px solid #000000;">Mandat</th>
                                <th style ="border : 2px solid #000000;">Solde</th>
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.jnl_eng_lines" t-as="ligne">                         
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.date_deb"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.creancier"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.ref_eng"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.no_mandat"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.imputation"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.mnt_eng"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.mnt_deg"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.mnt_mand"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.solde"/>
                                </td>
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:right">
                <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
	            <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>
	            <strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>
                </div>             
            </div>
            
        </t>
    </t>
</t>
</template>





<report id = "report_jrl_mdt"
    string = "Journal des dépenses"
    model = "budg_journal_mdt"
    report_type = "qweb-html"
    file = "sigepe_budget.report_jrnl_mdt"
    name = "sigepe_budget.report_jrnl_mdt_view"
    menu = "True"/>
    
    <template id="report_jrnl_mdt_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2><span t-field="o.visu"/></h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> <br/><br/>
                        <head>
                        
                   <style type="text/css">
                        
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">Date</th>
                                <th style ="border : 2px solid #000000;">Créancier</th>
                                <th style ="border : 2px solid #000000;">N° Mandat</th>
                                <th style ="border : 2px solid #000000;">Imputation</th>
                                <th style ="border : 2px solid #000000;">Emission</th>
                                <th style ="border : 2px solid #000000;">Annulation</th>
                                <th style ="border : 2px solid #000000;">Solde</th>
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.jnl_mdt_lines" t-as="ligne">                         
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.date_deb"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.creancier"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.no_mandat"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.imputation"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.mnt_emis"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.mnt_annule"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.solde"/>
                                </td>
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:left">
                <strong><span>L'Ordonnateur</span></strong>
                </div>             
            </div>
            
        </t>
    </t>
</t>
</template>


<report id = "report_etat_depense_engage"
    string = "Etats des dépenses engagées non mandatées"
    model = "budg_etat_depense_engage"
    report_type = "qweb-html"
    file = "sigepe_budget.report_etat_depense_engage"
    name = "sigepe_budget.report_etat_depense_engage_view"
    menu = "True"/>
    
    <template id="report_etat_depense_engage_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>ETAT DES DEPENSES ENGAGEES NON MANDATEES DU <span t-field="o.dt_appro_deb"/> AU <span t-field="o.dt_appro_fin"/></h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> <br/><br/>
                        
                        <head>
                        
                   <style type="text/css">
                        
                        
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">N° de l'acte d'engagement</th>
                                <th style ="border : 2px solid #000000;">Créancier</th>
                                <th style ="border : 2px solid #000000;">Imputation</th>
                                <th style ="border : 2px solid #000000;">Date</th>
                                <th style ="border : 2px solid #000000;">Montant engagé non madaté</th>
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.etadep_ids" t-as="ligne">                         
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.no_eng"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.creancier"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.imputation"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.dte"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant"/>
                                </td>
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:left">
                <strong><span>L'Ordonnateur</span></strong>
                </div>
                <div style="float:right">
                <strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">VISA DU CONTROLEUR FINANCIER</span></strong>
                <strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">VISA DU CONTROLEUR DE GESTION</span></strong>
                
                </div>             
            </div>
            
        </t>
    </t>
</t>
</template>


<report id = "report_etat_rest"
    string = "Etats des restes à réaliser"
    model = "budg_etat_rest"
    report_type = "qweb-html"
    file = "sigepe_budget.report_etat_rest"
    name = "sigepe_budget.report_etat_rest_view"
    menu = "True"/>
    
    <template id="report_etat_rest_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>ETAT DES RESTES A REALISER</h2>
                        <h1>Exercice <span t-field="o.x_exercice_id.no_ex"/></h1> <br/><br/>
                        
                        <head>
                        
                   <style type="text/css">
                        
                        
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000;">Nature de l'investissement</th>
                                <th style ="border : 2px solid #000000;">Budget</th>
                                <th style ="border : 2px solid #000000;">Réalisation</th>
                                <th style ="border : 2px solid #000000;">Reste à réaliser</th>
                                <th style ="border : 2px solid #000000;">Proposition de l'ordonnateur</th>
                        </thead>
                        
                         <tbody>                        
                            <tr t-foreach="o.rest_ids" t-as="ligne">                         
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.nature"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.budget"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.realisation"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.reste"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.observation"/>
                                </td>
                             </tr>
                        </tbody>
                </table>
                <br/><br/><br/>
                <div style="float:left">
                <strong><span>L'Ordonnateur</span></strong>
                </div>
                <div style="float:right">
                <strong><span t-if="o.company_id.ref_type_struct_id.name == 'EPE'">VISA DU CONTROLEUR FINANCIER</span></strong>
                <strong><span t-if="o.company_id.ref_type_struct_id.name == 'FN'">VISA DU CONTROLEUR DE GESTION</span></strong>
                
                </div>             
            </div>
            
        </t>
    </t>
</t>
</template>






<report id = "report_ordre_paiement"
    string = "Ordre de paiement"
    model = "budg_op"
    report_type = "qweb-html"
    file = "sigepe_budget.report_ordre_paiement"
    name = "sigepe_budget.report_ordre_paiement_view"
    menu = "True"/>
    
    
        <template id="report_ordre_paiement_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>ORDRE DE PAIEMENT</h2>
                        <head>
                        
                   <style type="text/css">
                        
                        th,
                        td {
                            border : 1px solid black;
                            text-align : center;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
							<tr>
								<th style ="border : 2px solid #000000;" colspan="2">Compte</th>
							</tr>
							<tr>
								<td style ="border : 2px solid #000000;">Numéro</td>
								<td style ="border : 2px solid #000000;">Intitulé</td>
							</tr>
                        </thead>                       
                         <tbody>                        
                            <tr>                         
                                <td style = "border:2px solid;">
                                    <span t-esc="o.no_cpt_tiers.compte"/>.<span t-esc="o.no_cpt_tiers.souscpte"/>
                                </td>                                                   
                                <td style = "border:2px solid;">
                                    <span t-esc="o.no_cpt_tiers.lb_long"/>
                                </td>
                             </tr>
                        </tbody>
                        </table>
                        <p>En exécution de la demande présentée par le créancier la créance, détaillée ci-après</p>
                        
                        <table class="table table-sm mb32">
                        	<tr>
                        		<th style ="border : 2px solid #000000;">Nature des dépenses</th>
								<th style ="border : 2px solid #000000;">Montant</th>
                        	</tr>
								
	                        <tr>
	                        	<td style = "border:2px solid;"><p t-field="o.nature_depense"/></td>
                            	<td style = "border:2px solid;"><p t-field="o.mnt_op"/></td>
	                        </tr>
                            <tr>
                            	<th style = "border:2px solid;">Pièces justificatives</th>
                            </tr>
                            <tr>
                            	<th style = "border:2px solid;" rowspan="3"><p t-field="o.piece_ids"/></th> 
                            </tr>
                            	<th style = "border:2px solid;">Montant brut à payer</th>
                            
                            <tr>
                            	                          		                        	                            
	                            <td style = "border:2px solid;"><p t-field="o.mnt_op"/></td>
	                        </tr> 
	                         	<tr><th style = "border:2px solid;">Bénéficiaire/Fournisseur</th></tr>
	                         	<tr><td style = "border:2px solid;"><p t-field="o.no_beneficiaire"/> </td></tr> 
                		</table>
                <br/><br/><br/>
                <span>Arrêté le préssent ordre de paiement à la somme de :</span><span t-field="o.text_amount"/> F CFA

                		<div>
	                       	<div style="float:left;">
	                       		<strong>L'ordonnateur</strong>
	                       	</div>                      
	                         <div style="float:right;">
	                        	<strong>L'Agent Comptable</strong>
	                         </div>
                        </div> 
            </div>
            
        </t>
    </t>
</t>
</template>


<record id="budget_landscape_agrege_id" model="report.paperformat">
    <field name="name">Budget Landscapes</field>
    <field name="default" eval="True"/>
    <field name="format">A4</field>
    <field name="page_height">0</field>
    <field name="page_width">0</field>
    <field name="orientation">Landscape</field>
    <field name="margin_top">10</field>
    <field name="margin_bottom">15</field>
    <field name="margin_left">7</field>
    <field name="margin_right">7</field>
    <field name="header_line" eval="False"/>
    <field name="header_spacing">3</field>
    <field name="dpi">90</field>
</record>



<report id = "report_budg_agrege"
    string = "Budget agrégé"
    model = "budg_budget_agrege"
    report_type = "qweb-html"
    file = "sigepe_budget.report_budg_agrege"
    name = "sigepe_budget.report_budg_agrege_view"
	paperformat = "budget_landscape_agrege_id"
    menu = "True"/>
    
    
    <template id="report_budg_agrege_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Budget <span t-field="o.budget_id.refp"/></h2>
                        <h3>Exercice <span t-field="o.x_exercice_id.no_ex"/></h3> 
                        <head>
                        
                   <style type="text/css">
                   
                        
                        th,
                        td {
                            border : 1px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h2 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }
                        
                    </style>
               </head>
                        <table class="table table-sm mb32">
                        <thead style ="border : 2px solid #000000;">
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Titre</th>
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Sect</th>
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Chap</th>
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Art</th>
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Parag</th>
                                <th style ="border : 2px solid #000000; text-align:center;" rowspan="1">Libellé</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exercice N-3</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exerice N-2</th>
                                <th style ="border : 2px solid #000000; text-align:center;" colspan="2">Exercice N-1</th>
                                <th style ="border : 2px solid #000000; text-align:center;">Montant Budgtétisé</th>
                        </thead>
                        
                         <tbody>                      
                         
                            <tr t-foreach="o.budg_budget_agrege_ids" t-as="ligne">
                          
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.titre_id"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.section_id"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.chapitre_id"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.article_id"/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.paragraphe_id"/>
                                </td>
                                
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.nature"/>
                                </td>
                                
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant1"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant11"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant2"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant22"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montantp"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montantpp"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                                <td style = "border:2px solid;">
                                    <span t-esc="ligne.montant"
                                     t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                </td>
                             </tr>
                        </tbody>  
                </table>
                
                		<div>
                        	<div style="float:left;">
                        		<strong>Le Directeur Général</strong>
                        	</div>
                        </div>
                        <div>
                        	<div style="float:right;">
                        		<strong>L'Agent Comptable</strong>
                        	</div>                      
                        </div>
            </div>
            
        </t>
    </t>
</t>
</template>


<report id = "report_bordmandat"
    string = "Bordereau de mandat "
    model = "budg_bordereau_mandatement"
    report_type = "qweb-html"
    file = "sigepe_budget.report_bordmandat"
    name = "sigepe_budget.report_bordmandat_view"
    menu = "True"/>


<template id="report_bordmandat_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h4>BORDEREAU DE MANDAT N° <span t-field="o.no_bord_mandat"/> DU <span t-field="o.date_emis"/></h4><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h4 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                        <table class="table table-sm mb32">
                        <thead>
                            <tr>
                                           
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >N° Mandat</th>
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >Date d'émission</th>
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >Objet de la dépense</th>      	
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >Bénéficiaire</th>
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >Imputation</th>
                                <th style = "border:2px solid; text-align:center; font-family : times new roman;" >Montant</th>                               
                            </tr>
                            
                           
                              </thead>
                               <tr t-foreach="o.mandat_ids" t-as="mdt">
	                             <td style = "border:2px solid; font-family : times new roman;"><span t-field="mdt.no_mandat"/></td>
	                             <td style = "border:2px solid; font-family : times new roman;"><span t-field="mdt.dt_etat"/></td>
                               	 <td style = "border:2px solid; font-family : times new roman;"><span t-field="mdt.obj"/></td>
                              	 <td style = "border:2px solid; font-family : times new roman;"><span t-field="mdt.no_beneficiaire"/></td>
                              	 <td style = "border:2px solid; font-family : times new roman;"><span t-field="mdt.cd_paragraphe_id"/></td>
                              	 <td style = "border:2px solid; font-family : times new roman; text-align:right;"><span t-field="mdt.mnt_ord"/></td>                             	
                              </tr>
							  <tr>
                             	<td style="font-family : times new roman;" colspan="4" >Total général du précédent bordereau</td>
                                <td style = "border:2px solid; text-align:right; font-family : times new roman;" colspan="3"><span t-field="o.total_prec"/></td>
							</tr>
               				<tr>
                               <td style="font-family : times new roman;" colspan="4">Total général du présent bordereau</td>
                               <td style = "border:2px solid; text-align:right;" colspan="3"><span t-field="o.totaux" style='text-align:right;'/></td>
							</tr>
                        </table>
                        
                        <strong style="font-family : times new roman;">Arrêté le présent bordereau de mandat à la somme de : </strong><span t-field="o.text_amount"/>(<span t-field="o.totaux"/>) F CFA

                        <br/><br/><br/>
                                               
                        <div>                       	                                        	                   
	                        <div style="float:left;">	                        	
								<t t-if ="o.et_doss in ('V','R') ">		
									<strong>Par : <br/></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      
								</t>
								
								<!--<t t-if ="o.et_doss in ('') ">		
									<strong>Par : <br/></strong>
									<strong>Le contrôle:</strong>                      
								</t>-->
							</div>
							
							<div style="float:right;">	                        	
								<t t-if ="o.et_doss in ('V','R') ">		
									<strong>Pour : <br/></strong>
									<strong>Le contrôle</strong>
								</t>
								<!--<t t-if ="o.et_doss in ('RD') ">		
									<strong>Pour : <br/></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">Le Directeur de l'Administration et des Finances:</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      					
								</t>
								<t t-if ="o.et_doss in ('PC') ">		
									<strong>Pour : <br/></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE'">L'Agent Comptable</span></strong>
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'EPE (AVEC DEROGATION)'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      
									<strong><span t-if="o.company_id.ref_type_struct_id.lib_court == 'FN'">Le Directeur des Finances et de la Comptabilité:</span></strong>	                      					
								</t>-->
							</div>
                        </div>
                                                
                     </div>
                </t>
             </t>
        </t>
</template>


<report id = "report_sit"
    string = "Compte administratif des dépenses"
    model = "budg_execution_depense"
    report_type = "qweb-html"
    file = "sigepe_budget.report_sit"
    name = "sigepe_budget.report_sit_view"
    menu = "True"/>


<template id="report_sit_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h4> <span t-field="o.name"/></h4><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h4 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                    <table>
                        <thead>
                            <tr>                             
                                <th style = "border:2px solid; text-align:center;">Sect</th>
                                <th style = "border:2px solid; text-align:center;">Chap</th>
                                <th style = "border:2px solid; text-align:center;">Art</th>      	
                                <th style = "border:2px solid; text-align:center;">Parag</th>
                                <th style = "border:2px solid; text-align:center;">Rubrique</th>
                                <th style = "border:2px solid; text-align:center; width:150px">Dotation initale</th>
								<th style = "border:2px solid; text-align:center; width:150px">Dotation corrigée</th>
								<th style = "border:2px solid; text-align:center; width:150px">Engagement</th>
								<th style = "border:2px solid; text-align:center; width:150px">Mandatement</th>
								<th style = "border:2px solid; text-align:center;">Taux de réalisation(%)</th>
								<th style = "border:2px solid; text-align:center; width:150px">Reste à mandater</th>
                            </tr>                               
                        </thead>
                            <tr t-foreach="o.depense_line" t-as="liq">
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.section.section.cd_section"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.chapitre.chapitre.cd_chapitre"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.article.article.cd_article"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.paragraphe.paragraphe.cd_paragraphe"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.rubrique"/></td>
							    <td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.initiale)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.corrige)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.engagement)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.mandat)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left;"><span t-field="liq.taux"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.reste)).replace(',', ' ')"/></td>								 
                            </tr>
                    </table>                      
                    </div>
                </t>
             </t>
        </t>
</template>


<report id = "report_sit_rec"
    string = "Situation d'exécution des recettes"
    model = "budg_execution_recette"
    report_type = "qweb-html"
    file = "sigepe_budget.report_sit_rec"
    name = "sigepe_budget.report_sit_rec_view"
    menu = "True"/>


<template id="report_sit_rec_view">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h4> <span t-field="o.name"/></h4><br/><br/>
                      
                      <head>
                   <style type="text/css">
                        
                        td {
                            border : 2px solid black;
                        }
                        
                         th {
                            border : 2px solid black;
                        }

                        table {
                            border-collapse : collapse;
                        }

                        td {
                            padding : 6px;
                        }

                        h4 {
                            text-align : center;
                            color : black;
                            border : 2px solid;
                            background-color: grey;
                        }

                        h1 {
                            text-align : center;
                        }     
                        
                    </style>
               </head>
               
                    <table>
                        <thead>
                            <tr>                             
                                <th style = "border:2px solid; text-align:center;">Sect</th>
                                <th style = "border:2px solid; text-align:center;">Chap</th>
                                <th style = "border:2px solid; text-align:center;">Art</th>      	
                                <th style = "border:2px solid; text-align:center;">Parag</th>
                                <th style = "border:2px solid; text-align:center;">Rubrique</th>
                                <th style = "border:2px solid; text-align:center; width:150px">Dotation initale</th>
								<th style = "border:2px solid; text-align:center; width:150px">Dotation corrigée</th>
								<th style = "border:2px solid; text-align:center; width:150px">Titre emis</th>
								<th style = "border:2px solid; text-align:center;">Taux de recouvrement(%)</th>
								<th style = "border:2px solid; text-align:center; width:150px">Reste à recouvrer</th>
                            </tr>                               
                        </thead>
                            <tr t-foreach="o.recette_line" t-as="liq">
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.section.section.cd_section"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.chapitre.chapitre.cd_chapitre"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.article.article.cd_article"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.paragraphe.paragraphe.cd_paragraphe"/></td>
							    <td style = "border:1px solid; text-align:left;"><span t-field="liq.rubrique"/></td>
							    <td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.initiale)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.corrige)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.emis)).replace(',', ' ')"/></td>
								<td style = "border:1px solid; text-align:left;"><span t-field="liq.taux"/></td>
								<td style = "border:1px solid; text-align:left; width:150px"><span t-esc="'{:,}'.format(int(liq.reste)).replace(',', ' ')"/></td>								 
                            </tr>
                    </table>                      
                    </div>
                </t>
             </t>
        </t>
</template>

    
    
</odoo>